// Generated by CoffeeScript 1.6.3
(function() {
  this.Gyroscoper = (function() {
    function Gyroscoper(_opts) {
      this.options = _opts;
    }

    Gyroscoper.prototype.start = function() {
      var el;
      el = document.getElementById('output');
      el.innerHTML = "Gyroscoper starting...";
      if (!navigator) {
        el.innerHTML = "No navigator";
        return;
      }
      if (!navigator.compass) {
        el.innerHTML = "No compass";
        return;
      }
      navigator.compass.getCurrentHeading(this.getHeadingSuccess, this.getHeadingError);
      el.innerHTML = this.getText();
      return setTimeout(this.start, 2000);
    };

    Gyroscoper.prototype.getHeadingSuccess = function(heading) {
      this.lastHeading = heading;
      return this.lastError = void 0;
    };

    Gyroscoper.prototype.getHeadingError = function(error) {
      this.lastError = error;
      return this.lastHeading = void 0;
    };

    Gyroscoper.prototype.getText = function() {
      if (this.lastHeading) {
        return 'Heading: ' + this.lastHeading.magneticHeading;
      }
      return 'Compass Error (' + error.code + '): ' + error;
      return 'No data yet';
    };

    return Gyroscoper;

  })();

}).call(this);
